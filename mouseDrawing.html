<!DOCTYPE html>
<html>
    <header>
        <h1>Mousing and Drawing Squares</h1>
    </header>
    <meta charset="utf-8"/>
<head>
    <script src="mouse-utils.js"></script>
    <script src="squareDrawing-utils.js"></script>
    <script src="webGLSetup-utils.js"></script>

    <script id="vertex" type="x-shader">
        attribute vec2 aVertexPosition;
        void main() {gl_Position = vec4(aVertexPosition, 0.0, 1.0);}
    </script>
    <script id="fragment" type="x-shader">
        #ifdef GL_ES
        precision highp float;
        #endif
        uniform vec4 uColor;
        void main() {gl_FragColor = uColor;}
    </script>
        
    <script type="text/javascript">
        // TODO: figure out how to set this up
        var canvasWidth = 800;
        var canvasHeight = 500;
        var clearColor = [0, 0.2, 0.2, 0.2]; //baby blue
        var shiftLeft = 50;
        var shiftTop = 100;
        
        // size of square sides
        smallSide = 10;
        largeSide = 50;

        function continuousDrawing(event) {
            console.log("painting x,y: "+lastMouseX+", "+lastMouseY);
            // at the corners the paintingColor will change
            if (lastMouseX<shiftLeft+largeSide && lastMouseY<shiftTop+largeSide) {
                paintingColor = topLeftColor;
            } else if (lastMouseX>canvasWidth+shiftLeft-largeSide && lastMouseY<shiftTop+largeSide) {
                paintingColor = topRightColor;
            } else if (lastMouseX<shiftLeft+largeSide && lastMouseY>canvasHeight+shiftTop-largeSide) {
                paintingColor = bottomLeftColor;
            } else if (lastMouseX>canvasWidth+shiftLeft-largeSide && lastMouseY>canvasHeight+shiftTop-largeSide) {
                paintingColor = bottomRightColor;
            } else if (mouseDown) { 
                // Otherwise, when the mouse is down, it will paint
                setSmallSquare(lastMouseX-shiftLeft,lastMouseY-shiftTop, paintingColor);
            } 
            // else: do nothing
        }

        function init() {
            
            setupSquareMakingCanvas(canvasWidth,canvasHeight);
            setupDisplayedCanvas(canvasWidth, canvasHeight, clearColor);
            setupShaders();
            setupCornerColoringSquares(canvasWidth,canvasHeight);
            
            listenToMouse(displayedCanvas);
            displayedCanvas.addEventListener("mousedown",continuousDrawing);
            document.addEventListener("mousemove", continuousDrawing);
        }
    </script>
</head>

<body onload="init();">
    <canvas id="squareMakingCanvas" 
        style="z-index: 1;
        position:absolute;
        left:50px;
        top:100px;
        "
        width="800" height="500">
    </canvas>
    <canvas id="displayedCanvas" style="z-index: 1;
        position:absolute;
        left:50px;
        top:100px;
        " width="800" height="500">
    </canvas>
</body>
</html>